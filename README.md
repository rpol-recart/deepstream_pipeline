Как это работает вместе:
Вы запускаете ./watchdog.sh.
Watchdog запускает python3 run_lid_detector.py ... и ждет его завершения.
Python-скрипт запускает пайплайн. Каждые 10 секунд (согласно FPS_REPORT_INTERVAL_SEC) он проверяет, сколько кадров пришло с каждой камеры.
Сценарий 1: Все хорошо. FPS с обеих камер выше 5 (согласно MIN_FPS_THRESHOLD). Скрипт просто печатает отчет в лог и продолжает работать.
Сценарий 2: Проблема. Поток с Камеры 1 "завис". Через 10 секунд скрипт видит, что с source_id=0 пришло 0 кадров, fps = 0. Это меньше, чем MIN_FPS_THRESHOLD.
Скрипт печатает критическое сообщение в лог и вызывает main_loop.quit().
main_loop.quit() заставляет функцию loop.run() в main завершиться. Программа переходит к pipeline.set_state(Gst.State.NULL) и штатно завершает свою работу.
Watchdog-скрипт видит, что дочерний процесс (наш Python-скрипт) завершился. Он печатает сообщение "Перезапуск через 5 секунд...", ждет 5 секунд и снова запускает Python-скрипт с самого начала.
Новый запуск пайплайна инициирует чистое переподключение ко всем RTSP-потокам.